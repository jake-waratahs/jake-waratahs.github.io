---
title: Part 15 - Mended
layout: post
ogimage: ""
---

<div class="ui one column stackable center aligned grid">
    <div class="row">
        <div class="column">
            <div class="video-container"><iframe width="560" height="315" src="https://www.youtube.com/embed/tJLBkhytjR8?rel=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe></div>
            <div class="caption">
                It's been a little while since my last post, I guess
            </div>
        </div>
    </div>
</div>

Sorry it's been awhile since I've written. I've been preoccupied with work, or life or other things. The summer has faded into cold weather, which sucks but I'll be back in the Sydney sun soon enough. 

<img src="/img/part15/forest.jpeg" class="ui centered large image" />
<div class="caption">
    This one was unharmed by the fires, thankfully.
</div>

<!--break-->

Highlights from the summer include going to Yosemite, my twenty six hour trip back to Sydney, spending a lot of time by the pool and spending a lot of time with Zoe. 

This week though has been a particularly big week. Last weekend I went up to Tahoe with some mates, the Aussie women's 7s won gold in Dubai, we beat the poms in the cricket, got Marriage Equality (finally) and I released a bunch of software.

<img src="/img/part15/hmb.jpg" class="ui centered large image" />
<div class="caption">
    Half Moon Bay
</div>

[You might have heard about or seen Facebook's new feature this week](https://techcrunch.com/2017/12/05/as-tbh-popularity-wanes-facebook-launches-did-you-know-social-questionnaire/), Did You Know - I've been working on that for a while now, and to have it released worldwide is a great feeling, and to see so many people using and enjoying it is fantastic. We launched that on Tuesday and then had a party to celebrate. 

I shipped another product this week too. So far, it has ninety two users, as opposed to Facebook's two billion. It's been used two hundred and thirty seven times as opposed to Did You Know, which has been used several orders of magnitude more often. Yet my own product feels just as important. 

If you're not familiar with an Amazon Echo, it's a voice controlled home assistant that can do things like control lights and speakers, give you weather, traffic and updates and some other stuff that I won't get into. I bought one on Black Friday (performing my capitalistic duty) and when setting it up, noticed it didn't have any Australian news sources. So I decided to write one. 

<img src="/img/part15/mum.jpg" class="ui centered large image" />
<div class="caption">
    Hi Mum! We're in my car on the way to Sonoma!
</div>

### Why did you write an Australian news source for a product only available in America?
Well firstly, Amazon has just launched in Australia (although it hadn't while I was developing it). And secondly, American news sucks. It's either about Trump, a mass shooting, or both. I prefer listening to Australian news, which at this time of year is usually about cricket. Additionally, there's a huge expat Aussie community all over the USA that could benefit from this. 

### How does it work?
I'm glad you asked, reader! Very easily is the answer. It's so easy, I'm just going to dump the code right here. Don't judge me please.

```python
import boto3
import time
import json
import urllib.request

data = urllib.request.urlopen("https://newsapi.org/v2/top-headlines?sources=abc-news-au").read()

output = []
news = json.loads(data.decode("utf-8"))
articles = news['articles']
num_articles = min(len(articles), 5)
for i in range(num_articles):
    article = articles[i]
    output.append({
        "uid": str(i),
        "updateDate": article['publishedAt'],
        "titleText": article['title'],
        "mainText": article['title'] + ". " + article['description'],
        "redirectionUrl": article['url']
    })

s3 = boto3.resource("s3")
bucket = s3.Bucket("news.jakebloom.me")
bucket.put_object(Key="news.json", ACL="public-read", Body=json.dumps(output), ContentType="application/json")
print("Updated at " + time.asctime())
```

An Amazon EC2 instance (a server somewhere in North California or Oregon) fetches news headlines from the ABC every hour, and the resulting JSON file is uploaded into an Amazon S3 instance (a different server somewhere in North California or Oregon). When someone chooses this as their news source, Amazon downloads the JSON file from my S3 instance and it gets read back to the user. Simples. 

### Why the ABC?
I'm using aunty as my news source since they're reliable, trustworthy and update consistently. They also have a tendency to report facts rather than sensationalise, and they have the least clickbaity headlines out of any Aussie news source (a crucial factor when the headline is being read out loud and you can't click on it.) While the ABC is unlikely to sue for copyright infringements, I’m not allowed to use their name or image without specifying that it's unofficial. 

### Where can I find it?
[You can check the app out here.](https://skills-store.amazon.com/deeplink/dp/B077SXG7JJ)
. As I mentioned, it now has ninety two users and someone asks for the news on average just over once an hour. Software that I wrote, even if it was 30 shitty lines of python, is helping my expat community feel more connected to the motherland, and it's helping people feel more at home. And that feels pretty good. 

There was a third bit of software that I released as well: it's a stupid little Google Chrome extension that replaces politicians names. For example, “Donald Trump” is replaced with “Admitted molester Donald Trump” and “Tony Abbott” is replaced with “Onion magnate Tony Abbott”. But that deserves its own blog post. 

<img src="/img/part15/snow.jpg" class="ui centered large image" />
<div class="caption">
    Zoe and I, along with some others, went to Lake Tahoe last week. It snowed!
</div>

Two weeks and I'm back on home soil. 

